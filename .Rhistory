View(df_primero)
View(df)
View(df_primero)
View(df)
Nombres <- c("Juan", "Pedro", "Mayelo", "Enrique", "José", "Pedro", "Mayelo", "José")
Valores <- c("2","4","3","5","2","4","3", "6")
df <- as.data.frame(cbind(Nombres, Valores))
df_primero <- df[!duplicated(df$Valores),]#Get starting week
View(df_primero)
View(df_primero)
df_final <- df[rev(!duplicated(rev(df$Valores))),]#Get ending week
View(df_final)
Nombres <- c("Juan", "Pedro", "Mayelo", "Enrique", "José", "Pedro", "Mayelo", "José")
Valores <- c("2","9","3","5","2","4","3", "6")
df <- as.data.frame(cbind(Nombres, Valores))
df_primero <- df[!duplicated(df$Valores),]#Get starting week
df_final <- df[rev(!duplicated(rev(df$Valores))),]#Get ending week
View(df_primero)
View(df)
View(df_final)
View(df)
View(df_primero)
View(df_final)
df
df_start
df
df_primero
df_primero <- df[duplicated(df$Valores),]#Get starting week
df_primero
df_primero <- df[!duplicated(df$Valores),]#Get starting week
df_primero <- df[!duplicated(df$Nombres),]#Get starting week
df_final <- df[rev(!duplicated(rev(df$Nombres))),]#Get ending week
df_primero
df_final
df_primero <- df[duplicated(df$Nombres),]#Get starting week
df_final <- df[rev(duplicated(rev(df$Nombres))),]#Get ending week
df_primero
df_primero <- df[duplicated(df$Nombres),]#Get starting week
df_final <- df[rev(duplicated(rev(df$Nombres))),]#Get ending week
df
df_primero
df_final
Nombres <- c("Juan", "Pedro", "Mayelo", "Enrique", "José", "Pedro", "Mayelo", "José")
Valores <- c("2","9","20","5","2","4","3", "6")
df <- as.data.frame(cbind(Nombres, Valores))
df_primero <- df[duplicated(df$Nombres),]#Get starting week
df_final <- df[rev(duplicated(rev(df$Nombres))),]#Get ending week
df
df_primero
df_final
df_primero <- df[!duplicated(df$Nombres),]#Get starting week
df_final <- df[rev(!duplicated(rev(df$Nombres))),]#Get ending week
df
df_primero
df_final
printmessage <- function(x){
if (x>0)
print ("x is greather than")
else
print("x is equeal or less than 0")
}
printmessage
printmessage <- function(x){
if (x>0)
print ("x is greather than")
else
print("x is equeal or less than 0")
invisible(x)
}
printmessage()
printmessage(3)
{
x <- c(9:20, 1:5, 3:7, 0:8)
## extract unique elements
(xu <- x[!duplicated(x)])
## similar, same elements but different order:
(xu2 <- x[!duplicated(x, fromLast = TRUE)])
## xu == unique(x) but unique(x) is more efficient
stopifnot(identical(xu,  unique(x)),
identical(xu2, unique(x, fromLast = TRUE)))
duplicated(iris)[140:143]
duplicated(iris3, MARGIN = c(1, 3))
anyDuplicated(iris) ## 143
# }
julio %>% desc(VEHICLE)
library(dplyr)
desc(julio$VEHICLE)
julio$id_vehicle <- paste(julio$as_date, julio$VEHICLE, sep="-")
desc(julio$id_vehicle)
julio %>% arrange(id_vehicle)
load("C:/Users/85412/Desktop/id169_6.csv")
df %>% select(Nombres)
calificaciones <- as.data.frame(Nombres, Valores)
calificaciones %>% dplyr::select(Nombres, Valores)
View(calificaciones)
calificaciones <- as.data.frame(cbind(Nombres, Valores))
df_end <- julio[rev(!duplicated(rev(julio$id_vehicle))),]#Get ending week
df_start <- julio[!duplicated(julio$id_vehicle),]#Get starting week
df_end <- julio[rev(!duplicated(rev(julio$id_vehicle))),]#Get ending week
head(df_start)
julio_6<- julio %>%  select(Id, TIMESTAMP, VEHICLE, ROUTEID, STARTTIME, STARTDATE, SCHEDULE_RELATIONSHIP, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CURRENTSTATUS, LECTURA, CST6CDT, as_date, as_hour) %>% filter(as_hour == "6")
julio_6<- julio %>%  select(Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date, as_hour) %>% filter(as_hour == "6")
View(julio_6)
julio$id_vehicle <- paste(julio$as_date, julio$VEHICLE, sep="-")
julio$id_vehicle <- paste(julio$as_date, julio$VEHICLE, sep="-")
julio <- julio %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, STARTTIME, STARTDATE, SCHEDULE_RELATIONSHIP, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CURRENTSTATUS, LECTURA, CST6CDT, as_date, as_hour) %>% filter(as_hour == "6" | as_hour=="7" | as_hour=="8" | as_hour=="9"| as_hour=="10" | as_hour=="11"| as_hour=="12"| as_hour=="13"| as_hour=="14"| as_hour=="15"| as_hour=="16"| as_hour=="17"| as_hour=="18"| as_hour=="19" | as_hour=="20"| as_hour=="21"| as_hour=="22"| as_hour=="23")
julio_6<- julio %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date, as_hour) %>% filter(as_hour == "6")
View(julio_6)
unique(julio_6)
View(julio_6)
distinct(julio_6$id_vehicle)
distinct_(julio_6$id_vehicle)
distinct(julio_6, id_vehicle)
nrow(distinct(julio_6, id_vehicle))
df_start <- julio_6[!duplicated(julio_6$id_vehicle),]#Get starting week
df_end <- julio_6[rev(!duplicated(rev(julio_6$id_vehicle))),]#Get ending week
st_ed<- dplyr::left_join(df_start, df_end, by="id_vehicle")
names(st_ed)
st_ed<- dplyr::left_join(df_start, df_end, by="id_vehicle")
head(st_ed)
View(st_ed)
track <- as.data.frame(TrackReconstruction::CalcDistance(st_ed$LATITUDE.x, st_ed$LONGITUDE.x, st_ed$LATITUDE.y, st_ed$LONGITUDE.y))
install.packages("TrackReconstruction")
track <- as.data.frame(TrackReconstruction::CalcDistance(st_ed$LATITUDE.x, st_ed$LONGITUDE.x, st_ed$LATITUDE.y, st_ed$LONGITUDE.y))
track_6 <- as.data.frame(TrackReconstruction::CalcDistance(st_ed$LATITUDE.x, st_ed$LONGITUDE.x, st_ed$LATITUDE.y, st_ed$LONGITUDE.y))
View(track_6)
dist_6 <- as.data.frame(TrackReconstruction::CalcDistance(st_ed$LATITUDE.x, st_ed$LONGITUDE.x, st_ed$LATITUDE.y, st_ed$LONGITUDE.y))
bear_6 <- as.data.frame(TrackReconstruction::CalcBearing(st_ed$LATITUDE.x, st_ed$LONGITUDE.x, st_ed$LATITUDE.y, st_ed$LONGITUDE.y))
View(bear_6)
View(st_ed)
install.packages("geosphere")
bear_6 <- geosphere::bearing(c(st_ed$LATITUDE.x, st_ed$LONGITUDE.x), c(st_ed$LATITUDE.y, st_ed$LONGITUDE.y))
bearing(c(10,10),c(20,20))
geosphere::bearing(c(10,10),c(20,20))
geosphere::bearing(st_ed$LATITUDE.x, st_ed$LONGITUDE.x)
LA <- C(-118.40, 33.95)
LA <- c(-118.40, 33.95)
NY <- C(-73.78, 40.63)
NY <- c(-73.78, 40.63)
geosphere::bearing(LA, NY)
geosphere::bearing(NY, LA)
SF <- c(julio_6$LONGITUDE, julio_6$LATITUDE )
NY
SF <- c(st_ed$LONGITUDE.x, st_ed$LATITUDE.x )
SF <- c(st_ed$LONGITUDE.y, st_ed$LATITUDE.y )
SF <- c(st_ed$LONGITUDE.x, st_ed$LATITUDE.x )
AM <- c(st_ed$LONGITUDE.y, st_ed$LATITUDE.y )
SF
bearing(SF, AM)
library(geosphere)
geosphere::bearing(SF, AM)
SF
head(SF)
tail(SF)
SF2 <- SF[1,1]
SF2 <- SF[1]
AM2 <- AM[1]
AM2 <- AM[11538]
AM2 <- AM[11538]
SF <- c(st_ed$LONGITUDE.x, st_ed$LATITUDE.x)
AM <- c(st_ed$LONGITUDE.y, st_ed$LATITUDE.y)
geosphere::distCosine(SF, AM)
bearing2 <- bearing(SF, AM)
SF <- c(-99.1534)
SF <- c(-99.1534, 19.4343)
AM <- c(-99.1400, 19.4301)
bearing(SF, AM)
View(bear_6)
TrackReconstruction::CalcDistance(19.4343, -99.1534)
TrackReconstruction::CalcDistance(19.4343, -99.1534, 19.4301,-99.1400)
View(bear_6)
TrackReconstruction::CalcDistance(19.4343, -99.1534, 19.4301,-99.1400)
TrackReconstruction::CalcBearing(19.4343, -99.1534, 19.4301,-99.1400)
geosphere::distCosine(SF,AM)
st_ed<- dplyr::left_join(df_start, df_end, by="id_vehicle")
View(st_ed)
julio_6 %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date, as_hour) %>% filter(as_hour == julio_6<- julio %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date, as_hour) %>% filter(id_vehicle == "2020-07-13-1"))
julio_6 %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date, as_hour) %>% filter(as_hour == julio_6<- julio %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date) %>% filter(id_vehicle == "2020-07-13-1"))
julio_6 %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date) %>% filter(id_vehicle == "2020-07-13-1")
View(julio_6)
nrow(distinct(julio_6, id_vehicle))
julio_6 %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date) %>% filter(id_vehicle == "2020-07-13-1")
julio_6_1 <- select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date) %>% filter(id_vehicle == "2020-07-13-1")
julio_6 %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date) %>% filter(id_vehicle == "2020-07-13-1")
nrow(julio_6 %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date) %>% filter(id_vehicle == "2020-07-13-1"))
julio_6_1 <- julio_6 %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date) %>% filter(id_vehicle == "2020-07-13-1")
df_start_1 <- julio_6_1[!duplicated(julio_6_1$id_vehicle),]#Get starting week
g week
df_end_1 <- julio_6_1[rev(!duplicated(rev(julio_6_1$id_vehicle))),]#Get
df_end_1 <- julio_6_1[rev(!duplicated(rev(julio_6_1$id_vehicle))),]
View(df_end_1)
View(df_end_1)
View(df_start_1)
st_ed_1<- dplyr::left_join(df_start_1, df_end_1, by="id_vehicle")
View(st_ed_1)
TrackReconstruction::CalcDistance(st_ed_1$LATITUDE.x, st_ed_1$LONGITUDE.x, st_ed_1$LATITUDE.y, st_ed_1$LONGITUDE.y)
TrackReconstruction::CalcBearing(st_ed_1$LATITUDE.x, st_ed_1$LONGITUDE.x, st_ed_1$LATITUDE.y, st_ed_1$LONGITUDE.y)
SF <- c(st_ed_1$LONGITUDE.x, st_ed_1$LATITUDE.x)
AM <- c(st_ed_1$LONGITUDE.y, st_ed_1$LATITUDE.y)
geosphere::bearing(SF, AM)
geosphere:distCosine(SF, AM)
geosphere::distCosine(SF, AM)
filter(julio_6_1, id_vehicle =="2020-07-13-1")
filter(julio, id_vehicle =="2020-07-13-1")
nrow(filter(julio, id_vehicle =="2020-07-13-1"))
nrow(filter(julio, id_vehicle =="2020-07-13-1" & as.date=="7" ))
names(julio)
nrow(filter(julio, id_vehicle =="2020-07-13-1" & as.date=="7" ))
nrow(filter(julio, id_vehicle =="2020-07-13-1" | as.date=="7" ))
nrow(filter(julio, id_vehicle =="2020-07-13-1" | "as.date=="7" ))
nrow(filter(julio, as.date =="2020-07-13-1"))
nrow(dplyr::filter(julio, as.date =="2020-07-13-1"))
View(julio)
julio$as_date <- as.character(julio$as_date)
julio <- julio %>%  select(Id, TIMESTAMP, VEHICLE, ROUTEID, STARTTIME, STARTDATE, SCHEDULE_RELATIONSHIP, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CURRENTSTATUS, LECTURA, CST6CDT, as_date, as_hour) %>% filter(as_hour == "6" | as_hour=="7" | as_hour=="8" | as_hour=="9"| as_hour=="10" | as_hour=="11"| as_hour=="12"| as_hour=="13"| as_hour=="14"| as_hour=="15"| as_hour=="16"| as_hour=="17"| as_hour=="18"| as_hour=="19" | as_hour=="20"| as_hour=="21"| as_hour=="22"| as_hour=="23")
julio$id_vehicle <- paste(julio$as_date, julio$VEHICLE, sep="-")
julio06<- julio %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date, as_hour) %>% filter(as_hour == "6")
nrow(distinct(julio06, id_vehicle))
nrow(julio06 %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date) %>% filter(id_vehicle == "2020-07-13-1"))
juliod13<- julio %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date, as_hour) %>% filter(as_date == "2020-07-13")
nrow(juliod13 %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date) %>% filter(as_date == "2020-07-13"))
juliod13<- julio %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date, as_hour) %>% filter(as_date == "2020-07-13")
nrow(julio06 %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date) %>% filter(id_vehicle == "2020-07-13-1"))
julio06<- julio %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date, as_hour) %>% filter(as_hour == "6")
View(julio)
juliod13<- julio %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date, as_hour) %>% filter(as_date == "2020-07-13")
View(julio06)
nrow(distinct(as_date))
nrow(distinct(julio$as_date))
names(julio)
julio$as_date
nrow(distinct(julio$as_date))
table(julio$as_date,julio$id_vehicle)
julio <- readr::read_csv("C:/Users/85412/Desktop/gtfs_rt/julio.csv")
julio$CST6CDT <- lubridate::as_datetime(julio$TIMESTAMP, tz="CST6CDT")
colnames(julio)[9] <- "LATITUDE"
julio$LATITUDE <- stringr::str_sub(julio$LATITUDE, 10,-1)
julio$LATITUDE <- as.numeric(julio$LATITUDE)
julio$VEHICLE <- stringr::str_sub(julio$VEHICLE, 4,-1)
julio$as_date<- lubridate::as_date(julio$CST6CDT)
julio$as_hour <- lubridate::hour(julio$CST6CDT)
class(julio$as_date)
julio <- readr::read_csv("C:/Users/85412/Desktop/gtfs_rt/julio.csv")
julio$CST6CDT <- lubridate::as_datetime(julio$TIMESTAMP, tz="CST6CDT")
colnames(julio)[9] <- "LATITUDE"
julio$LATITUDE <- stringr::str_sub(julio$LATITUDE, 10,-1)
julio$LATITUDE <- as.numeric(julio$LATITUDE)
julio$VEHICLE <- stringr::str_sub(julio$VEHICLE, 4,-1)
julio$as_date<- lubridate::as_date(julio$CST6CDT)
julio$as_hour <- lubridate::hour(julio$CST6CDT)
julio <- julio %>%  select(Id, TIMESTAMP, VEHICLE, ROUTEID, STARTTIME, STARTDATE, SCHEDULE_RELATIONSHIP, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CURRENTSTATUS, LECTURA, CST6CDT, as_date, as_hour) %>% filter(as_hour == "6" | as_hour=="7" | as_hour=="8" | as_hour=="9"| as_hour=="10" | as_hour=="11"| as_hour=="12"| as_hour=="13"| as_hour=="14"| as_hour=="15"| as_hour=="16"| as_hour=="17"| as_hour=="18"| as_hour=="19" | as_hour=="20"| as_hour=="21"| as_hour=="22"| as_hour=="23")
julio$id_vehicle <- paste(julio$as_date, julio$VEHICLE, sep="-")
julio <- julio %>%  select(Id, TIMESTAMP, VEHICLE, ROUTEID, STARTTIME, STARTDATE, SCHEDULE_RELATIONSHIP, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CURRENTSTATUS, LECTURA, CST6CDT, as_date, as_hour) %>% filter(as_hour == "6" | as_hour=="7" | as_hour=="8" | as_hour=="9"| as_hour=="10" | as_hour=="11"| as_hour=="12"| as_hour=="13"| as_hour=="14"| as_hour=="15"| as_hour=="16"| as_hour=="17"| as_hour=="18"| as_hour=="19" | as_hour=="20"| as_hour=="21"| as_hour=="22"| as_hour=="23")
julio_13 <- julio %>%  select(Id, TIMESTAMP, VEHICLE, ROUTEID, STARTTIME, STARTDATE, SCHEDULE_RELATIONSHIP, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CURRENTSTATUS, LECTURA, CST6CDT, as_date, as_hour) %>% filter(as_date == "2020-07-13")
julio13 <- julio %>%  select(Id, TIMESTAMP, VEHICLE, ROUTEID, STARTTIME, STARTDATE, SCHEDULE_RELATIONSHIP, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CURRENTSTATUS, LECTURA, CST6CDT, as_date, as_hour) %>% filter(as_date == "2020-07-13")
nrow(distinct(julio13$as_date))
nrow(distinct(julio13$id_vehicle))
nrow(distinct(julio13))
View(julio13)
julio$id_vehicle <- paste(julio$as_date, julio$VEHICLE, sep="-")
julio <- julio %>%  select(Id, TIMESTAMP, VEHICLE, ROUTEID, STARTTIME, STARTDATE, SCHEDULE_RELATIONSHIP, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CURRENTSTATUS, LECTURA, CST6CDT, as_date, as_hour) %>% filter(as_hour == "6" | as_hour=="7" | as_hour=="8" | as_hour=="9"| as_hour=="10" | as_hour=="11"| as_hour=="12"| as_hour=="13"| as_hour=="14"| as_hour=="15"| as_hour=="16"| as_hour=="17"| as_hour=="18"| as_hour=="19" | as_hour=="20"| as_hour=="21"| as_hour=="22"| as_hour=="23")
julio <- julio %>%  select(Id, TIMESTAMP, VEHICLE, ROUTEID, STARTTIME, STARTDATE, SCHEDULE_RELATIONSHIP, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CURRENTSTATUS, LECTURA, CST6CDT, as_date, as_hour, id_vehicle) %>% filter(as_hour == "6" | as_hour=="7" | as_hour=="8" | as_hour=="9"| as_hour=="10" | as_hour=="11"| as_hour=="12"| as_hour=="13"| as_hour=="14"| as_hour=="15"| as_hour=="16"| as_hour=="17"| as_hour=="18"| as_hour=="19" | as_hour=="20"| as_hour=="21"| as_hour=="22"| as_hour=="23")
julio$id_vehicle <- paste(julio$as_date, julio$VEHICLE, sep="-")
julio <- julio %>%  select(Id, TIMESTAMP, VEHICLE, ROUTEID, STARTTIME, STARTDATE, SCHEDULE_RELATIONSHIP, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CURRENTSTATUS, LECTURA, CST6CDT, as_date, as_hour, id_vehicle) %>% filter(as_hour == "6" | as_hour=="7" | as_hour=="8" | as_hour=="9"| as_hour=="10" | as_hour=="11"| as_hour=="12"| as_hour=="13"| as_hour=="14"| as_hour=="15"| as_hour=="16"| as_hour=="17"| as_hour=="18"| as_hour=="19" | as_hour=="20"| as_hour=="21"| as_hour=="22"| as_hour=="23")
julio13 <- julio %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, STARTTIME, STARTDATE, SCHEDULE_RELATIONSHIP, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CURRENTSTATUS, LECTURA, CST6CDT, as_date, as_hour) %>% filter(as_date == "2020-07-13")
nrow(distinct(julio13))
nrow(distinct(julio06, id_vehicle))
nrow(distinct(julio13, id_vehicle))
nrow(julio13 %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date) %>% filter(id_vehicle == "2020-07-13-1"))
nrow(distinct(julio13, id_vehicle == "2020-07-13-1"))
View(julio13)
nrow(julio13 %>%  select(id_vehicle, LATITUDE, LONGITUDE,  CST6CDT, as_date) %>% filter(id_vehicle == "2020-07-13-1"))
nrow(julio13 %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date) %>% filter(id_vehicle == "2020-07-13-1"))
nrow(distinct(julio13))
nrow(julio13 %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date) %>% filter(id_vehicle == "2020-07-13-1"))
nrow(julio13 %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date) %>% filter(id_vehicle == "2020-07-13-1"))
nrow(distinct(julio, id_vehicle))
nrow(distinct(julio13, id_vehicle))
nrow(julio13 %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date) %>% filter(id_vehicle == "2020-07-13-1"))
nrow(julio13 %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date) %>% filter(id_vehicle == "2020-07-13-1"))
julio_13_1 <- julio13 %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date) %>% filter(id_vehicle == "2020-07-13-1")
View(julio_13_1)
df_start_1 <- julio_13_1[!duplicated(julio_13_1$id_vehicle),]
df_end_1 <- julio_13_1[rev(!duplicated(rev(julio_13_1$id_vehicle))),]
st_ed_1<- dplyr::left_join(df_start_1, df_end_1, by="id_vehicle")
View(st_ed_1)
gtfs_estatico<-sf::st_read("/Users/85412/Desktop/gtfs_estatico/gtfs_estatico.shp")
gtfs_estatico <- gtfs_estatico %>%  select(agencia, ruta, geometry) %>% filter(agencia == "METROBUS")
gtfs_estatico$agencia <- NULL
gtfs_estatico<-sf::st_read("/Users/85412/Desktop/gtfs_estatico/gtfs_estatico.shp")
View(julio_13_1)
trajr
?? trajr
install.packages("trajr")
coords <- data.frame(x = julio_13_1$LONGITUDE,
y = julio_13_1$LATITUDE,
times = julio_13_1$CST6CDT)
trj <- TrajFromCoords(coords)
trj <- trajr::TrajFromCoords(coords)
plot(trj)
View(trj)
View(st_ed_1)
nrow(julio_6 %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date) %>% filter(id_vehicle == "2020-07-13-1"))
nrow(julio_13_1 %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date) %>% filter(id_vehicle == "2020-07-13-1"))
julio_2020_07_13_1_6 <- julio13 %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date) %>% filter(id_vehicle == "2020-07-13-1")
julio_2020_07_13_1 <- julio13 %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date) %>% filter(id_vehicle == "2020-07-13-1")
julio_2020_07_13_1_6 <- julio13 %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date) %>% filter(id_vehicle == "2020-07-13-1" & as_hour=="6")
julio_2020_07_13_1_6 <- julio13 %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date) %>% filter(id_vehicle == "2020-07-13-1" & as_hour=="6")
class(as_hour)
nrow(julio13 %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date, as_hour) %>% filter(id_vehicle == "2020-07-13-1"))
julio_2020_07_13_1_6 <- julio13 %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date, as_hour) %>% filter(id_vehicle == "2020-07-13-1" & as_hour=="6")
View(julio_2020_07_13_1_6)
nrow(julio_2020_07_13_1_6 %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date) %>% filter(id_vehicle == "2020-07-13-1" & as_hour=="6"))
nrow(julio_2020_07_13_1_6 %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date) %>% filter(id_vehicle == "2020-07-13-1" & as_hour=="6"))
names(julio_2020_07_13_1_6)
class(julio_2020_07_13_1_6)
class(julio_2020_07_13_1_6$as_hour)
julio_2020_07_13_1_6$as_hour <- as.character(julio_2020_07_13_1_6$as_hour)
nrow(julio_2020_07_13_1_6 %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CST6CDT, as_date) %>% filter(id_vehicle == "2020-07-13-1" & as_hour=="6"))
View(julio_2020_07_13_1_6)
coords <- data.frame(x = julio_2020_07_13_1_6$LONGITUDE,
y = julio_2020_07_13_1_6$LATITUDE,
times = julio_2020_07_13_1_6$CST6CDT)
trj <- trajr::TrajFromCoords(coords)
plot(trj)
View(trj)
trj <- trajr::TrajDirectionalChange(trj = )
trj <- trajr::TrajDirectionalChange(trj)
trj <- trajr::TrajDistance(trj)
coords <- data.frame(x = julio_2020_07_13_1_6$LONGITUDE,
y = julio_2020_07_13_1_6$LATITUDE,
times = julio_2020_07_13_1_6$CST6CDT)
trj <- trajr::TrajFromCoords(coords)
plot(trj)
trajr::TrajDistance(trj)
trajr::TrajLength(trj)
trajr::TrajDuration(trj)
trajr::TrajStepLengths(trj)
trajr::TrajGetUnits(trj)
View(julio_2020_07_13_1_6)
trajr::TrajGetNCoords(trj)
write.csv(trj, "/Users/85412/Desktop/trj.csv")
trajr::TrajMeanVelocity(trj)
TrackReconstruction::CalcBearing(19.4737, -99.1460, 19.4680, -99.1439) #en km
TrackReconstruction::CalcDistance(19.4737, -99.1460, 19.4680, -99.1439) #en km
SF <- c(-99.1460, 19.4737)
AM <- c(-99.1439, 19.4680)
geosphere::distCosine(SF, AM) #En metros
geosphere::bearing(SF, AM) #No sé en qué unidades está el resultado.
geosphere::distCosine(AM,SF) #En metros
geosphere::bearing(AM, SF) #No sé en qué unidades está el resultado.
View(trj)
View(julio_2020_07_13_1_6)
geosphere::bearing(AM, SF) #No sé en qué unidades está el resultado.
geosphere::bearing(SF, AM) #No sé en qué unidades está el resultado.
View(trj)
SF <- c(-99.1532, 19.4927)
AM <- c(-99.1545, 19.4961)
geosphere::distCosine(SF, AM) #En metros
geosphere::bearing(SF, AM) #No sé en qué unidades está el resultado.
library(swirl)
install.packages("swirl")
geosphere::bearing(SF, AM) #No sé en qué unidades está el resultado.
geosphere::bearing(AM, SF) #No sé en qué unidades está el resultado.
library(swirl)
swirl()
1
1
swirl()
head(fflags)
head(flags)
dim(flags)
class(flags)
cls_list <- lapply(flags, class)
cls_list
class(cls_list)
as.character(cls_list)
?sapply
cls_list <- sapply(flags, class)
cls_list <- sapply(flags, class)
cls_list <- sapply(flags, class)
cls_vect <- sapply(flags, class)
class(cls_vect)
sum(flags$orange)
flag_colors <- flags[,11:17]
head(flag_colors)
lapply()
lapply(flag_colors, sum)
sapply(flag_colors, sum)
sapply(flag_colors, mean)
flag_shapes <- flags[,
| 19:23]
flag_shapes <- flags[, 19:23]
lapply(flag_shapes, lapply)
lapply(flag_shapes, range)
sapply(flag_shapes, range)
shape_mat <- sapply(flag_shapes, range)
shape_mat
class(shape_mat)
unique(c(3,4,5,5,5,6,6))
unique_vals <- lapply(flags, unique)
print(unique_vals)
unique_vals
sapply(unique_vals, length)
sapply(flags, unique)
lapply(unique_vals, function(elem) elem[2])
SF <- c(-99.1532, 19.4927)
AM <- c(-99.1545, 19.4961)
geosphere::distCosine(SF, AM) #En metros
geosphere::bearing(SF, AM) #No sé en qué unidades está el resultado.
trajr::TrajStepLengths(trj)
trajr::TrajsStepLengths(trj)
trajr::TrajsStepLengths(trj)
trajr::TrajStepLengths(trj)
trajr::TrajStepLengths(trj)
trajr::TrajsStepLengths(trj)
trajr::TrajStepLengths(trj, units=m)
trjs <- trajr::TrajsBuild(trj, scale = scale, units = "m")
trjs <- trajr::TrajsBuild(trj, units = "m")
trjs <- TrajsBuild(julio_2020_07_13_1_6, scale = scale, units = "m")
trjs <- trajr::TrajsBuild(julio_2020_07_13_1_6, scale = scale, units = "m")
trjs <- trajr::TrajsBuild(trj, scale = scale, units = "m")
trajr::TrajStepLengths(trj, units=m)
trajr::TrajStepLengths(trj)
View(julio_2020_07_13_1_6)
coords <- data.frame(x= c(-99.1460, -99.1439, -99.1437, -99.1444),
y= c(19.4737, 19.4680, 19.4675, 19.4631),
times= c(06:00:38, 06:01:41, 06:02:47, 06:03:51))
coords <- data.frame(x= c(-99.1460, -99.1439),
y= c(19.4737, 19.4680),
times= c(06:00, 06:01))
coords <- data.frame(x= c(-99.1460, -99.1439),
y= c(19.4737, 19.4680),
times= c(6, 7))
trj <- trajr::TrajFromCoords(coords)
plot(trj)
trajr::TrajStepLengths(trj)
TrackReconstruction::CalcDistance(19.4737, -99.1460, 19.4680, -99.1439)
library(swirl)
swirl::
swirl()
swirl()
nrow(distinct(julio13, id_vehicle=="2020-07-13"))
nrow(distinct(julio13, id_vehicle))
coords <- data.frame(x= c(-99.1460, -99.1439),
y= c(19.4737, 19.4680),
times= c(6, 7))
trj <- trajr::TrajFromCoords(coords)
plot(trj)
trajr::TrajStepLengths(trj)
trajr::TrajStepLengths(trj)
TrackReconstruction::CalcDistance(19.4737, -99.1460, 19.4680, -99.1439)
SF <- c(-99.1532, 19.4927)
AM <- c(-99.1545, 19.4961)
geosphere::distCosine(SF, AM) #En metros
coords <- data.frame(x= c(-99.1460, -99.1439),
y= c(19.4737, 19.4680),
times= c(6, 7))
trj <- trajr::TrajFromCoords(coords)
plot(trj)
coords <- data.frame(x = julio_2020_07_13_1_6$LONGITUDE,
y = julio_2020_07_13_1_6$LATITUDE,
times = julio_2020_07_13_1_6$CST6CDT)
trj <- trajr::TrajFromCoords(coords)
plot(trj)
trajr::TrajStepLengths(trj)
print(summary(trajr::TrajStepLengths(trj) ))
trajr::TrajAngles(trj)
julio_2020_07_13_1_6
head(julio_2020_07_13_1_6)
head(julio_2020_07_13_1_6$LONGITUDE)
head(julio_2020_07_13_1_6$LLATITUDE)
head(julio_2020_07_13_1_6$LATITUDE)
head(julio_2020_07_13_1_6$CST6CDT)
coords <- data.frame(x= c(-99.1460, -99.1439, -99.1437),
y= c(19.4737, 19.4680, 19.4675),
times= c(0, 1, 2))
trj <- trajr::TrajFromCoords(coords)
plot(trj)
trajr::TrajStepLengths(trj)
coords <- data.frame(x= c(-99.1460, -99.1439, -99.1437, -99.1444),
y= c(19.4737, 19.4680, 19.4675, 19.4631),
times= c(0, 1, 2, 4))
trj <- trajr::TrajFromCoords(coords)
plot(trj)
trajr::TrajStepLengths(trj)
TrackReconstruction::CalcDistance(19.4675, -99.1437, 19.4631, -99.1444)
View(trj)
coords
P1 <- c(-99.1437, 19.4675)
P2 <- c(-99.1444, 19.4631)
geosphere::distCosine(SF, AM) #En metros
geosphere::bearing(SF, AM) #No sé en qué unidades está el resultado.
geosphere::distCosine(P1, P2)#En metros
geosphere::bearing(P1, P2) #No sé en qué unidades está el resultado.
trajr::TrajStepLengths(trj)
P3 <- c(-99.1437, 19.4675)
P4 <- c(-99.1444, 19.4631)
geosphere::distCosine(P1, P2)#En metros
geosphere::bearing(P3, P4) #No sé en qué unidades está el resultado.
coords
geosphere::distCosine(P2, P3)
trajr::TrajStepLengths(trj)
geosphere::distCosine(P1, P2)#En metros
P1 <- c(-99.1460, 19.4737)
P2 <- c(-99.1439, 19.4680)
P3 <- c(-99.1437, 19.4675)
P4 <- c(-99.1444, 19.4631)
geosphere::distCosine(P1, P2)#En metros
geosphere::distCosine(P2, P3)#En metros
geosphere::distCosine(P3, P4)#En metros
trajr::TrajStepLengths(trj)
