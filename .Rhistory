sum(jul_1292$dist, na.rm=TRUE)
View(jul_1292)
julio <- readr::read_csv("C:/Users/85412/Desktop/gtfs_rt/julio.csv")
julio$CST6CDT <- lubridate::as_datetime(julio$TIMESTAMP, tz="CST6CDT")
colnames(julio)[9] <- "LATITUDE"
julio$LATITUDE <- stringr::str_sub(julio$LATITUDE, 10,-1)
julio$LATITUDE <- as.numeric(julio$LATITUDE)
julio$VEHICLE <- stringr::str_sub(julio$VEHICLE, 4,-1)
julio$as_date<- lubridate::as_date(julio$CST6CDT)
julio$as_hour <- lubridate::hour(julio$CST6CDT)
julio <- julio %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, STARTTIME, STARTDATE, SCHEDULE_RELATIONSHIP, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CURRENTSTATUS, LECTURA, CST6CDT, as_date, as_hour) %>% filter(as_hour == "6" | as_hour=="7" | as_hour=="8" | as_hour=="9"| as_hour=="10" | as_hour=="11"| as_hour=="12"| as_hour=="13"| as_hour=="14"| as_hour=="15"| as_hour=="16"| as_hour=="17"| as_hour=="18"| as_hour=="19" | as_hour=="20"| as_hour=="21"| as_hour=="22"| as_hour=="23")
julio$id_vehicle <- paste(julio$as_date, julio$VEHICLE, sep="-")
julio <- julio %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, STARTTIME, STARTDATE, SCHEDULE_RELATIONSHIP, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CURRENTSTATUS, LECTURA, CST6CDT, as_date, as_hour) %>% filter(as_hour == "6" | as_hour=="7" | as_hour=="8" | as_hour=="9"| as_hour=="10" | as_hour=="11"| as_hour=="12"| as_hour=="13"| as_hour=="14"| as_hour=="15"| as_hour=="16"| as_hour=="17"| as_hour=="18"| as_hour=="19" | as_hour=="20"| as_hour=="21"| as_hour=="22"| as_hour=="23")
jul_13 <- julio %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, STARTTIME, STARTDATE, SCHEDULE_RELATIONSHIP, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CURRENTSTATUS, LECTURA, CST6CDT, as_date, as_hour) %>% filter(as_date == "2020-07-13")
gtfs_estatico<-sf::st_read("/Users/85412/Desktop/gtfs_estatico/gtfs_estatico.shp")
gtfs_estatico <- gtfs_estatico %>%  select(agencia, ruta, geometry) %>% filter(agencia == "METROBUS")
gtfs_estatico$agencia <- NULL
jul_13p<- sf::st_as_sf(jul_13, coords = c("LONGITUDE", "LATITUDE"), crs = 4326, agr = "constant")
jul_13_jn <- sf::st_join(jul_13p, gtfs_estatico, join = st_nn, maxdist = 100)# Debe correrse library(nngeo) para que trabaje el st_nn
jul_13_jn <- sf::st_join(jul_13p, gtfs_estatico, join = nngeo::st_nn, maxdist = 100)# Debe correrse library(nngeo) para que trabaje el st_nn
View(jul_13_jn)
jul_13_jn <-jul_13_jn %>% select(., id_vehicle, geometry, CST6CDT, ruta) %>% filter(ruta=="00L1" |ruta=="00L2")
sf::st_coordinates(jul_13_jn)
jul_13_coords<- sf::st_coordinates(jul_13_jn)
View(jul_13_coords)
jul_13_jn <- cbind(jul_13_jn, jul_13_coords)
View(jul_13_jn)
jul_fun <- function(i,j) {
j<-jul_13_jn %>% select(id_vehicle, Y, X, CST6CDT) %>% filter(jul_13_jn$id_vehicle==i) %>%
mutate(., y_lead=lead(Y, n=1)) %>% mutate(., x_lead=lead(X, n=1))
mutate(j, dist = TrackReconstruction::CalcDistance(j$Y, j$X, j$y_lead, j$x_lead))
}
for (i in jul_13_jn$id_vehicle) {
assign (i, data.frame(jul_fun(i)))
}
View(`2020-07-13-736`)
View(`2020-07-13-717`)
View(`2020-07-13-552`)
View(`2020-07-13-556`)
unicos <- as.data.frame(unique(jul_13_jn))
unicos <- unique(jul_13_jn)
unicos <- as.data.frame(unique(jul_13_jn$id_vehicle))
paste("`", jul_13_jn$id_vehicle, "`")
unicos <- paste("`", jul_13_jn$id_vehicle, "`")
lista <- lista(unicos)
lista <- list(unicos)
suma <- sapply(lista, function(x) sum(x$dist, na.rm = TRUE))
lista
lista[1]
lista <- list(unicos)
lista[1]
unicos <- paste(",","`", jul_13_jn$id_vehicle, "`")
lista <- list(unicos)
View(lista)
suma <- sapply(lista, function(x) sum(x$dist, na.rm = TRUE))
suma <- sapply(lista, function(x) sum(x$dist, na.rm = FALSE))
write.csv(unicos, "/Users/85412/Desktop/unicos.csv")
write.csv(unicos, "/Users/85412/Desktop/unicos.csv")
unicos <- as.data.frame(unique(jul_13_jn$id_vehicle))
unicos <- paste(",","`", jul_13_jn$id_vehicle, "`")
unicos <- as.data.frame(unique(jul_13_jn$id_vehicle))
unicos <- paste("`", jul_13_jn$id_vehicle)
unicos <- as.data.frame(unique(jul_13_jn$id_vehicle))
unicos <- paste0("`", jul_13_jn$id_vehicle)
unicos <- as.data.frame(unique(jul_13_jn$id_vehicle))
unicos <- paste0("`", "jul_13_jn$id_vehicle")
unicos <- as.data.frame(unique(jul_13_jn$id_vehicle))
write.csv(unicos, "/Users/85412/Desktop/unicos.csv")
unicos <- as.data.frame(unique(jul_13_jn$id_vehicle))
write.csv(unicos, "/Users/85412/Desktop/unicos.csv")
View(unicos)
lista <- list(unicos)
suma <- sapply(lista, function(x) sum(x$dist, na.rm = FALSE))
lista <- list(unicos)
lista <- list(unicos$`unique(jul_13_jn$id_vehicle)`)
write.csv(unicos, "/Users/85412/Desktop/unicos.csv")
write.csv(unicos, "C:/Users/85412/Desktop/unicos.csv")
write.csv(unicos, "C:/Users/85412/Desktop/unico.csv")
write.csv(unicos, "C:/Users/85412/Desktop/unicos.csv")
lista <- list(`2020-07-13-57`
,`2020-07-13-178`
,`2020-07-13-179`
,`2020-07-13-180`
,`2020-07-13-1197`
,`2020-07-13-1291`
,`2020-07-13-1292`
,`2020-07-13-1295`
,`2020-07-13-1296`
,`2020-07-13-360`
,`2020-07-13-362`
,`2020-07-13-364`
,`2020-07-13-365`
,`2020-07-13-366`
,`2020-07-13-367`
,`2020-07-13-369`
,`2020-07-13-1017`
,`2020-07-13-1018`
,`2020-07-13-398`
,`2020-07-13-399`
,`2020-07-13-400`
,`2020-07-13-407`
,`2020-07-13-408`
,`2020-07-13-416`
,`2020-07-13-418`
,`2020-07-13-422`
,`2020-07-13-424`
,`2020-07-13-425`
,`2020-07-13-432`
,`2020-07-13-441`
,`2020-07-13-452`
,`2020-07-13-1019`
,`2020-07-13-1021`
,`2020-07-13-1022`
,`2020-07-13-3`
,`2020-07-13-1253`
,`2020-07-13-1058`
,`2020-07-13-1060`
,`2020-07-13-991`
,`2020-07-13-993`
,`2020-07-13-994`
,`2020-07-13-995`
,`2020-07-13-996`
,`2020-07-13-997`
,`2020-07-13-1153`
,`2020-07-13-881`
,`2020-07-13-882`
,`2020-07-13-1154`
,`2020-07-13-58`
,`2020-07-13-1037`
,`2020-07-13-1038`
,`2020-07-13-1039`
,`2020-07-13-10016`
,`2020-07-13-10017`
,`2020-07-13-10018`
,`2020-07-13-10021`
,`2020-07-13-10022`
,`2020-07-13-10023`
,`2020-07-13-10024`
,`2020-07-13-10025`
,`2020-07-13-1155`
,`2020-07-13-1156`
,`2020-07-13-1157`
,`2020-07-13-1158`
,`2020-07-13-1159`
,`2020-07-13-525`
,`2020-07-13-526`
,`2020-07-13-527`
,`2020-07-13-528`
,`2020-07-13-529`
,`2020-07-13-530`
,`2020-07-13-531`
,`2020-07-13-532`
,`2020-07-13-533`
,`2020-07-13-535`
,`2020-07-13-1040`
,`2020-07-13-1041`
,`2020-07-13-1042`
,`2020-07-13-1257`
,`2020-07-13-1259`
,`2020-07-13-1261`
,`2020-07-13-1262`
,`2020-07-13-1263`
,`2020-07-13-536`
,`2020-07-13-538`
,`2020-07-13-1045`
,`2020-07-13-1063`
,`2020-07-13-10001`
,`2020-07-13-10011`
,`2020-07-13-10012`
,`2020-07-13-10013`
,`2020-07-13-1172`
,`2020-07-13-1173`
,`2020-07-13-1174`
,`2020-07-13-1176`
,`2020-07-13-1177`
,`2020-07-13-1264`
,`2020-07-13-1266`
,`2020-07-13-1160`
,`2020-07-13-1161`
,`2020-07-13-1162`
,`2020-07-13-1163`
,`2020-07-13-1164`
,`2020-07-13-1165`
,`2020-07-13-1166`
,`2020-07-13-1167`
,`2020-07-13-1168`
,`2020-07-13-987`
,`2020-07-13-990`
,`2020-07-13-1219`
,`2020-07-13-1220`
,`2020-07-13-1222`
,`2020-07-13-1223`
,`2020-07-13-1247`
,`2020-07-13-1248`
,`2020-07-13-1267`
,`2020-07-13-1268`
,`2020-07-13-1269`
,`2020-07-13-1270`
,`2020-07-13-1283`
,`2020-07-13-1284`
,`2020-07-13-1271`
,`2020-07-13-1064`
,`2020-07-13-1066`
,`2020-07-13-1068`
,`2020-07-13-1069`
,`2020-07-13-1070`
,`2020-07-13-1071`
,`2020-07-13-1072`
,`2020-07-13-1073`
,`2020-07-13-1170`
,`2020-07-13-1171`
,`2020-07-13-10015`
,`2020-07-13-1186`
,`2020-07-13-1187`
,`2020-07-13-1188`
,`2020-07-13-1192`
,`2020-07-13-1236`
,`2020-07-13-1215`
,`2020-07-13-1216`
,`2020-07-13-1217`
,`2020-07-13-1218`
,`2020-07-13-10007`
,`2020-07-13-930`
,`2020-07-13-1225`
,`2020-07-13-1226`
,`2020-07-13-1227`
,`2020-07-13-1228`
,`2020-07-13-1237`
,`2020-07-13-1238`
,`2020-07-13-1239`
,`2020-07-13-1240`
,`2020-07-13-1024`
,`2020-07-13-1026`
,`2020-07-13-1035`
,`2020-07-13-10005`
,`2020-07-13-10003`
,`2020-07-13-10004`
,`2020-07-13-1230`
,`2020-07-13-1231`
,`2020-07-13-1232`
,`2020-07-13-1233`
,`2020-07-13-1234`
,`2020-07-13-1235`
,`2020-07-13-1193`
,`2020-07-13-992`
,`2020-07-13-1065`
,`2020-07-13-26`
,`2020-07-13-40`
,`2020-07-13-1281`
,`2020-07-13-20`
,`2020-07-13-1111`
,`2020-07-13-28`
,`2020-07-13-37`
,`2020-07-13-1224`
,`2020-07-13-53`
,`2020-07-13-1078`
,`2020-07-13-523`
,`2020-07-13-11`
,`2020-07-13-1132`
,`2020-07-13-784`
,`2020-07-13-9`
,`2020-07-13-14`
,`2020-07-13-1123`
,`2020-07-13-359`
,`2020-07-13-10`
,`2020-07-13-169`
,`2020-07-13-1094`
,`2020-07-13-1298`
,`2020-07-13-8`
,`2020-07-13-1214`
,`2020-07-13-378`
,`2020-07-13-1180`
,`2020-07-13-1034`
,`2020-07-13-1089`
,`2020-07-13-33`
,`2020-07-13-36`
,`2020-07-13-39`
,`2020-07-13-25`
,`2020-07-13-706`
,`2020-07-13-51`
,`2020-07-13-984`
,`2020-07-13-55`
,`2020-07-13-734`
,`2020-07-13-1128`
,`2020-07-13-1152`
,`2020-07-13-1074`
,`2020-07-13-49`
,`2020-07-13-56`
,`2020-07-13-770`
,`2020-07-13-981`
,`2020-07-13-380`
,`2020-07-13-43`
,`2020-07-13-1100`
,`2020-07-13-5`
,`2020-07-13-763`
,`2020-07-13-363`
,`2020-07-13-176`
,`2020-07-13-985`
,`2020-07-13-24`
,`2020-07-13-720`
,`2020-07-13-983`
,`2020-07-13-1120`
,`2020-07-13-782`
,`2020-07-13-35`
,`2020-07-13-1083`
,`2020-07-13-1103`
,`2020-07-13-48`
,`2020-07-13-1113`
,`2020-07-13-999`
,`2020-07-13-1229`
,`2020-07-13-988`
,`2020-07-13-1085`
,`2020-07-13-1131`
,`2020-07-13-1142`
,`2020-07-13-1129`
,`2020-07-13-29`
,`2020-07-13-1130`
,`2020-07-13-749`
,`2020-07-13-1098`
,`2020-07-13-537`
,`2020-07-13-16`
,`2020-07-13-1282`
,`2020-07-13-1087`
,`2020-07-13-534`
,`2020-07-13-1255`
,`2020-07-13-767`
,`2020-07-13-54`
,`2020-07-13-1221`
,`2020-07-13-1260`
,`2020-07-13-1145`
,`2020-07-13-1265`
,`2020-07-13-1139`
,`2020-07-13-1254`
,`2020-07-13-1091`
,`2020-07-13-1258`
,`2020-07-13-377`
,`2020-07-13-6`
,`2020-07-13-1077`
,`2020-07-13-1175`
,`2020-07-13-1105`
,`2020-07-13-1256`
,`2020-07-13-1044`
,`2020-07-13-1112`
,`2020-07-13-750`
,`2020-07-13-1115`
,`2020-07-13-1117`
,`2020-07-13-1191`
,`2020-07-13-479`
,`2020-07-13-1079`
,`2020-07-13-1009`
,`2020-07-13-1148`
,`2020-07-13-1150`
,`2020-07-13-38`
,`2020-07-13-1`
,`2020-07-13-709`
,`2020-07-13-789`
,`2020-07-13-1149`
,`2020-07-13-1088`
,`2020-07-13-1086`
,`2020-07-13-779`
,`2020-07-13-718`
,`2020-07-13-702`
,`2020-07-13-22`
,`2020-07-13-1095`
,`2020-07-13-724`
,`2020-07-13-730`
,`2020-07-13-982`
,`2020-07-13-1122`
,`2020-07-13-477`
,`2020-07-13-44`
,`2020-07-13-45`
,`2020-07-13-774`
,`2020-07-13-1138`
,`2020-07-13-1011`
,`2020-07-13-741`
,`2020-07-13-1127`
,`2020-07-13-30`
,`2020-07-13-1090`
,`2020-07-13-740`
,`2020-07-13-747`
,`2020-07-13-486`
,`2020-07-13-707`
,`2020-07-13-1110`
,`2020-07-13-703`
,`2020-07-13-744`
,`2020-07-13-771`
,`2020-07-13-790`
,`2020-07-13-713`
,`2020-07-13-732`
,`2020-07-13-1182`
,`2020-07-13-986`
,`2020-07-13-712`
,`2020-07-13-1114`
,`2020-07-13-742`
,`2020-07-13-1082`
,`2020-07-13-729`
,`2020-07-13-1147`
)
suma <- sapply(lista, function(x) sum(x$dist, na.rm = FALSE))
suma
suma <- sapply(lista, function(x) sum(x$dist, na.rm = TRUE))
suma
suma <- as.data.frame(sapply(lista, function(x) sum(x$dist, na.rm = TRUE)))
rango <- sapply(mylist, function(x) range(x$CST6CDT, na.rm = TRUE))
rango_t <- data.frame(t(rango))
jul_13 <- cbind(unicos, suma)
jul_13 <- cbind(jul_13, range_t)
jul_13 <- cbind(jul_13, rango_t)
rango <- sapply(lista, function(x) range(x$CST6CDT, na.rm = TRUE))
rango_t <- data.frame(t(rango))
jul_13 <- cbind(jul_13, rango_t)
View(jul_13)
lubridate::as_datetime(jul_13$X1)
lubridate::as_datetime(jul_13$X2)
lubridate::as_datetime(jul_13$X1)
lubridate::as_datetime(jul_13$X1) - lubridate::as_datetime(jul_13$X2)
lubridate::as_datetime(jul_13$X2) - lubridate::as_datetime(jul_13$X1)
jul_13_x2<- lubridate::as_datetime(jul_13$X2)
jul_13_x1<- lubridate::as_datetime(jul_13$X1)
jul_13$X2-jul_13$X1
jul_13$hrs<- lubridate::as_datetime(jul_13$X2) - lubridate::as_datetime(jul_13$X1)
View(jul_13)
jul_13$hrs <- jul_13/60
View(jul_13)
jul_13 <- cbind(unicos, suma)
jul_13 <- cbind(jul_13, rango_t)
jul_13$hrs<- lubridate::as_datetime(jul_13$X2) - lubridate::as_datetime(jul_13$X1)
jul_13$hrs <- jul_13$hrs/60/60
View(jul_13)
View(jul_13)
names(jul_13) <- c("id_vehicle", "distancia", "t1", "t2", "horas")
View(jul_13)
jul_13$velocidad <- jul_13$distancia/jul_13$horas
class(jul_13$horas)
jul_13$horas <- as.numeric(jul_13$horas)
jul_13$velocidad <- jul_13$distancia/jul_13$horas
names(jul_13) <- c("id_vehicle", "distancia", "t1", "t2", "tiempo", "velocidad")
View(jul_13)
write.csv(jul_13, "/Users/85412/Desktop/gtfs_rt/julio/jul_13.csv")
names(jul_13) <- c("id_vehicle", "distancia", "t1", "t2", "tiempo", "velocidad")
write.csv(jul_13, "/Users/85412/Desktop/gtfs_rt/julio/jul_13.csv")
df_list = mget(ls(pattern = "df[2020]"))
View(df_list)
df_list = mget(ls(pattern = "df[jul]"))
df_list = mget(ls(pattern = "jul"))
View(df_list)
df_list = mget(ls(pattern = "2020"))
mylist_ = mget(ls(pattern = "2020-07-13-")) # con este comando agrega los dataframes con un patrón a la lista
View(lista)
View(mylist)
julio <- readr::read_csv("C:/Users/85412/Desktop/gtfs_rt/julio.csv")
julio$CST6CDT <- lubridate::as_datetime(julio$TIMESTAMP, tz="CST6CDT")
colnames(julio)[9] <- "LATITUDE"
julio$LATITUDE <- stringr::str_sub(julio$LATITUDE, 10,-1)
julio$LATITUDE <- as.numeric(julio$LATITUDE)
julio$VEHICLE <- stringr::str_sub(julio$VEHICLE, 4,-1)
julio$as_date<- lubridate::as_date(julio$CST6CDT)
julio$as_hour <- lubridate::hour(julio$CST6CDT)
julio$id_vehicle <- paste(julio$as_date, julio$VEHICLE, sep="-")
julio <- julio %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, STARTTIME, STARTDATE, SCHEDULE_RELATIONSHIP, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CURRENTSTATUS, LECTURA, CST6CDT, as_date, as_hour) %>% filter(as_hour == "6" | as_hour=="7" | as_hour=="8" | as_hour=="9"| as_hour=="10" | as_hour=="11"| as_hour=="12"| as_hour=="13"| as_hour=="14"| as_hour=="15"| as_hour=="16"| as_hour=="17"| as_hour=="18"| as_hour=="19" | as_hour=="20"| as_hour=="21"| as_hour=="22"| as_hour=="23")
jul_13 <- julio %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, STARTTIME, STARTDATE, SCHEDULE_RELATIONSHIP, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CURRENTSTATUS, LECTURA, CST6CDT, as_date, as_hour) %>% filter(as_date == "2020-07-14")
jul_13 <- NULL
jul_14 <- julio %>%  select(id_vehicle, Id, TIMESTAMP, VEHICLE, ROUTEID, STARTTIME, STARTDATE, SCHEDULE_RELATIONSHIP, LABEL, LATITUDE, LONGITUDE, BEARING, ODOMETER, SPEED, CURRENTSTATUS, LECTURA, CST6CDT, as_date, as_hour) %>% filter(as_date == "2020-07-14")
gtfs_estatico<-sf::st_read("/Users/85412/Desktop/gtfs_estatico/gtfs_estatico.shp")
gtfs_estatico <- gtfs_estatico %>%  select(agencia, ruta, geometry) %>% filter(agencia == "METROBUS")
gtfs_estatico$agencia <- NULL
jul_14p<- sf::st_as_sf(jul_14, coords = c("LONGITUDE", "LATITUDE"), crs = 4326, agr = "constant")
jul_14_jn <- sf::st_join(jul_14p, gtfs_estatico, join = nngeo::st_nn, maxdist = 100)# Debe correrse library(nngeo) para que trabaje el st_nn
jul_14_jn <-jul_14_jn %>% select(., id_vehicle, geometry, CST6CDT, ruta) %>% filter(ruta=="00L1" |ruta=="00L2")
jul_14_coords<- sf::st_coordinates(jul_14_jn)
jul_14_jn <- cbind(jul_14_jn, jul_14_coords)
jul_fun <- function(i,j) {
j<-jul_14_jn %>% select(id_vehicle, Y, X, CST6CDT) %>% filter(jul_14_jn$id_vehicle==i) %>%
mutate(., y_lead=lead(Y, n=1)) %>% mutate(., x_lead=lead(X, n=1))
mutate(j, dist = TrackReconstruction::CalcDistance(j$Y, j$X, j$y_lead, j$x_lead))
}
for (i in jul_14_jn$id_vehicle) {
assign (i, data.frame(jul_fun(i)))
}
lista <- mget(ls(pattern = "2020-07-14-")) # con este comando agrega los dataframes con un patrón a la lista
suma <- as.data.frame(sapply(lista, function(x) sum(x$dist, na.rm = TRUE)))
rango <- sapply(lista, function(x) range(x$CST6CDT, na.rm = TRUE))
rango_t <- data.frame(t(rango))
jul_13 <- cbind(unicos, suma)
jul_14 <- cbind(unicos, suma)
unicos <- as.data.frame(unique(jul_13_jn$id_vehicle))
unicos <- as.data.frame(unique(jul_14_jn$id_vehicle))
jul_14 <- cbind(unicos, suma)
jul_14 <- cbind(jul_14, rango_t)
jul_14$hrs<- lubridate::as_datetime(jul_14$X2) - lubridate::as_datetime(jul_14$X1)
jul_14$hrs <- jul_14$hrs/60/60
jul_14$horas <- as.numeric(jul_14$horas)
View(jul_14)
jul_13$velocidad <- jul_13$distancia/jul_13$horas
names(jul_13) <- c("id_vehicle", "distancia", "t1", "t2", "tiempo", "velocidad")
write.csv(jul_14, "/Users/85412/Desktop/gtfs_rt/julio/jul_14.csv")
names(jul_14) <- c("id_vehicle", "distancia", "t1", "t2", "tiempo", "velocidad")
jul_14$hrs<- lubridate::as_datetime(jul_14$X2) - lubridate::as_datetime(jul_14$X1)
jul_14$hrs <- jul_14$hrs/60/60
jul_14$velocidad <- jul_14$distancia/jul_14$horas
jul_14$hrs<- lubridate::as_datetime(jul_14$X2) - lubridate::as_datetime(jul_14$X1)
View(jul_14)
jul_14$hrs <- as.numeric(jul_14$hrs)
jul_14$hrs <- jul_14$hrs/60/60
jul_14$velocidad <- jul_14$distancia/jul_14$horas
View(jul_14)
jul_14$velocidad <- jul_14$`sapply(lista, function(x) sum(x$dist, na.rm = TRUE))`/jul_14$horas
View(jul_14)
jul_14$velocidad <- jul_14$`sapply(lista, function(x) sum(x$dist, na.rm = TRUE))`/jul_14$hrs
names(jul_14) <- c("id_vehicle", "distancia", "t1", "t2", "tiempo", "velocidad")
write.csv(jul_14, "/Users/85412/Desktop/gtfs_rt/julio/jul_14.csv")
write.csv(jul_14, "/Users/85412/Desktop/gtfs_rt/julio/jul_14.csv")
